  // Save settings and start scan
  document.getElementById('startScan').addEventListener('click', function() {
    const settings = {
      svMin: parseInt(document.getElementById('svMin').value),
      svMax: parseInt(document.getElementById('svMax').value),
      cpcMax: parseFloat(document.getElementById('cpcMax').value),
      charsMin: parseInt(document.getElementById('charsMin').value),
      charsMax: parseInt(document.getElementById('charsMax').value),
      ext_net: document.getElementById('ext_net').checked,
      ext_co: document.getElementById('ext_co').checked,
      avail_com: document.getElementById('avail_com').checked,
      noAdult: document.getElementById('noAdult').checked
    };
    
    // Save settings
    chrome.storage.local.set(settings);
    
    // Send message to start scanning
    chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {
      chrome.tabs.sendMessage(tabs[0].id, {
        action: "startScan",
        settings: settings
      });
    });
  });
